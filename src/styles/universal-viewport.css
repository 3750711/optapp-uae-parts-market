/* Универсальная высота viewport для всех устройств */
.safe-viewport {
  /* Fallback для старых браузеров */
  min-height: 100vh;
  
  /* Использование CSS переменной из JS */
  min-height: calc(var(--vh, 1vh) * 100);
}

/* Безопасная область для контента */
.safe-area-container {
  /* Базовые отступы */
  padding-top: 16px;
  padding-bottom: 16px;
  padding-left: 16px;
  padding-right: 16px;
  
  /* Progressive enhancement для поддерживающих браузеров */
  padding-top: max(16px, env(safe-area-inset-top, 16px));
  padding-bottom: max(16px, env(safe-area-inset-bottom, 16px));
  padding-left: max(16px, env(safe-area-inset-left, 16px));
  padding-right: max(16px, env(safe-area-inset-right, 16px));
}

/* Фикс для старых iPhone с home button */
@supports not (padding: max(0px)) {
  .safe-area-container {
    padding-bottom: 20px;
  }
}

/* Специальные правила для маленьких экранов */
@media (max-width: 320px) {
  .safe-area-container {
    padding-left: 12px;
    padding-right: 12px;
  }
}

/* Универсальные touch targets */
.touch-optimized {
  /* Минимальный размер для всех устройств */
  min-height: 44px;
  min-width: 44px;
  
  /* Оптимизация для touch */
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
  
  /* Предотвращение double-tap zoom */
  -ms-touch-action: manipulation;
}

/* Для очень маленьких экранов */
@media (max-width: 320px) {
  .touch-optimized {
    min-height: 48px;
    min-width: 48px;
  }
}

/* Фикс для клавиатуры на iOS */
.keyboard-safe {
  /* Базовый отступ */
  padding-bottom: 16px;
  
  /* Для поддерживающих браузеров */
  padding-bottom: max(16px, env(keyboard-inset-height, 0px));
}

/* Отключение bounce эффекта на iOS */
.no-bounce {
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: auto;
}

/* Оптимизация скролла для старых Android */
.optimized-scroll {
  -webkit-overflow-scrolling: touch;
  will-change: scroll-position;
}

.optimized-scroll:not(:active) {
  will-change: auto;
}